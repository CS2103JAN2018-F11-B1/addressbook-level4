<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>Ten Chee Onn David Jonathan - Project Portfolio</title>
<link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css">
</head>
<body class="article">
<div id="header">
<h1>Ten Chee Onn David Jonathan - Project Portfolio</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="project-crm-book"><a class="link" href="#project-crm-book">PROJECT: CRM Book</a></h2>
<div class="sectionbody">
<hr>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="link" href="#overview">Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>CRM Book application aims to assist Salespeople by implementing the most important functionality of a CRM System, that is, managing their business contacts and clients. In a CRM, buisness contacts are seperated into two categories, Leads and Contacts. Companies are usually added as Contacts.</p>
</div>
<div class="paragraph">
<p>Some unique features of this CRM that benefits the individual Salesperson even more is an enhanced detection of duplicates through fields such as email and phone number, importing of a CSV file of leads that the salesperson may have bought through a mailing list or obtained through a tradeshow, sharing of posts about their company through LinkedIn, as well as seeing directions to their Leadâ€™s office through Google Maps. It is important to note that these features all enhance the experience of the salesperson, and does not distract from the core functionality of managing their relationship with their leads and contacts.</p>
</div>
<div class="paragraph">
<p>The user interacts with CRM Book using a CLI, and it has a GUI created with JavaFX. It is written in Java.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary-of-contributions"><a class="link" href="#summary-of-contributions">Summary of contributions</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Major enhancement</strong>: Post a Status Update onto LinkedIn</p>
<div class="ulist">
<ul>
<li>
<p>What it does: After a Salesperson has logged in to LinkedIn via the linkedin_login command, he will be able to post status updates via the linkedin_share command.</p>
</li>
<li>
<p>Justification: This feature improves CRM Book significantly in that it does not require the Salesperson to navigate away from CRM Book just to post a status update about their company. In the Sales and Marketing world, LinkedIn is used often to promote news articles and other related company marketing materials, and this feature reduces the friction generated by doing</p>
</li>
<li>
<p>Highlights: This enhancement required an in-depth research into encryption and storing of API Secrets in a native application. It also made use of LinkedIn&#8217;s OAuth2 authentication scheme as well as API be able to work. The implementation was challenging as it required the exploration of new APIs outside of the address book. The enhancement also required studying more about events and how they are handled, as well as handling different threads on Java FX, in particular handling the 'Not on FX application thread' exception.</p>
</li>
<li>
<p>Credits: LinkedIn API</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Major enhancement</strong>: View directions to a customer or potential customer&#8217;s office via Google Maps</p>
<div class="ulist">
<ul>
<li>
<p>What it does: After a Salesperson has set their office location on the CRM Book, they will be able to view directions to a customer&#8217;s or potential customer&#8217;s office by clicking on their name.</p>
</li>
<li>
<p>Justification: This feature improves CRM Book significantly in that it does not require the Salesperson to navigate away from CRM Book just to find directions to their client&#8217;s location, or to know how long it will take to get there. Salespeople in general travel to other offices often to do a demo or to pitch a product. With this feature, the salesperson will not have to use their smartphone to view directions while still in the office. Rather, they will be able to view directions in the CRM Book and then leave the office when necessary.</p>
</li>
<li>
<p>Highlights: This enhancement involved learning more about Google Map&#8217;s webservice, studying between the different APIs and other options that they provided, as well as research on how to use the config.json file in the CRM Book.</p>
</li>
<li>
<p>Credits: Google Maps URLs</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Code contributed</strong>: [<a href="https://github.com/CS2103JAN2018-F11-B1/main/blob/master/collated/functional/DavidTen.md">Functional code</a>] [<a href="https://github.com/CS2103JAN2018-F11-B1/main/blob/master/collated/test/DavidTen.md">Test code</a>]</p>
</li>
<li>
<p><strong>Other contributions</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Project management:</p>
<div class="ulist">
<ul>
<li>
<p>Managed releases <code>v1.2</code> - <code>v1.5rc</code> (5 releases) on GitHub</p>
</li>
</ul>
</div>
</li>
<li>
<p>Community:</p>
<div class="ulist">
<ul>
<li>
<p>Reported bugs and suggestions for other teams in the class (examples: <a href="https://github.com/CS2103JAN2018-W13-B3/main/issues/157">Issue #157</a>, <a href="https://github.com/CS2103JAN2018-W13-B3/main/issues/132">Issue #132</a>, <a href="https://github.com/CS2103JAN2018-W13-B3/main/issues/133">Issue #133</a>, <a href="https://github.com/CS2103JAN2018-W13-B3/main/issues/134">Issue #134</a>, <a href="https://github.com/CS2103JAN2018-W13-B3/main/issues/136">Issue #136</a>, <a href="https://github.com/CS2103JAN2018-W13-B3/main/issues/139">Issue #139</a>, <a href="https://github.com/CS2103JAN2018-W13-B3/main/issues/140">Issue #140</a>, <a href="https://github.com/CS2103JAN2018-W13-B3/main/issues/141">Issue #141</a>, <a href="https://github.com/CS2103JAN2018-W13-B3/main/issues/145">Issue #145</a>, <a href="https://github.com/CS2103JAN2018-W13-B3/main/issues/149">Issue #149</a>)</p>
</li>
<li>
<p>Contributed to forum discussions (examples:  <a href="https://nus-cs2103-ay1718s2.slack.com/archives/C8K2W5WTH/p1523377709000303">1</a>, <a href="https://nus-cs2103-ay1718s2.slack.com/archives/C8K2W5WTH/p1521906587000027">2</a>, <a href="https://nus-cs2103-ay1718s2.slack.com/archives/C8K2W5WTH/p1521473983000781">3</a>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-user-guide"><a class="link" href="#contributions-to-the-user-guide">Contributions to the User Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the User Guide. They showcase my ability to write documentation targeting end-users.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="log-in-to-linkedin-code-linklog-code-code-linkedin_login-code"><a class="link" href="#log-in-to-linkedin-code-linklog-code-code-linkedin_login-code">Log in to LinkedIn: <code>linklog</code>, <code>linkedin_login</code></a></h3>
<div class="paragraph">
<p>Format: 'linklog', 'linkedin_login'</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
A LinkedIn Login is required if you want to share posts to linkedIn. If this is your first login, you will also have to give permissions for CRM Book in LinkedIn via a pop up.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="share-a-post-on-linkedin-code-linkshare-code-code-linkedin_share-code"><a class="link" href="#share-a-post-on-linkedin-code-linkshare-code-code-linkedin_share-code">Share a Post on LinkedIn: <code>linkshare</code>, <code>linkedin_share</code></a></h3>
<div class="paragraph">
<p>Format: 'linkshare [content]', 'linkedin_share [content]'</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
This command will allow you to share a post on LinkedIn to all your connections. This will allow you to share any interesting marketing materials your company may be involved in quickly.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="setting-current-location-code-set_office_address-code-code-seta-code"><a class="link" href="#setting-current-location-code-set_office_address-code-code-seta-code">Setting current location: <code>set_office_address</code>, <code>setA</code></a></h3>
<div class="paragraph">
<p>Sets the current office address for Google Maps<br>
Format: `setA a/ADDRESS</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Setting this address is required if you want to see the Google Map directions to a customer&#8217;s location
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="get-directions-to-customer-s-office-commandless"><a class="link" href="#get-directions-to-customer-s-office-commandless">Get directions to customer&#8217;s office: commandless</a></h3>
<div class="paragraph">
<p>In order to use this, you must have an office address set. You can then either click on a person card or use the <code>select</code> command in order to view the Google Maps directions.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If a person card was selected while the office location is set, you have to select a different person card to see the map
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Success of this command is also dependent on the success of Google intepreting the address entered
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-developer-guide"><a class="link" href="#contributions-to-the-developer-guide">Contributions to the Developer Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the Developer Guide. They showcase my ability to write technical documentation and the technical depth of my contributions to the project.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="linkedin-login-feature"><a class="link" href="#linkedin-login-feature">LinkedIn Login Feature</a></h3>
<div class="sect3">
<h4 id="current-implementation"><a class="link" href="#current-implementation">Current Implementation</a></h4>
<div class="paragraph">
<p>The linkedInLogin mechanism is handled largely by the oAuth2Client interacting with the browser window, which the user will interact with in order to give LinkedIn their username, password, as well as granting the application permission for use.</p>
</div>
<div class="paragraph">
<p>When the <code>linkedIn_login</code> command is called, a <code>ShowBrowserRequestEvent</code> will be fired by <code>LinkedInLoginCommand(Class)</code> and picked up by the MainWindow.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
    <span class="directive">public</span> CommandResult execute() {
        EventsCenter.getInstance().post(<span class="keyword">new</span> ShowBrowserRequestEvent());
        <span class="keyword">return</span> <span class="keyword">new</span> CommandResult(MESSAGE_SUCCESS);
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The MainWindow in turn will call the <code>OAuth2Client(Class)</code> which will fire up the browser awaiting an authorization code from LinkedIn that will be sent after the user has successfully logged in and granted the CRM Book permission.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Subscribe</span>
    <span class="directive">private</span> <span class="type">void</span> handleLinkedInAuthenticationEvent(ShowBrowserRequestEvent event) {
        logger.info(LogsCenter.getEventHandlingLogMessage(event));
        handleLinkedInAuthentication();
    }</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> handleLinkedInAuthentication() {
    <span class="keyword">try</span> {
        Oauth2Client.authenticateWithLinkedIn(config);
    } <span class="keyword">catch</span> (<span class="exception">IOException</span> e) {
        e.printStackTrace();
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> authenticateWithLinkedIn(Config configuration) <span class="directive">throws</span> <span class="exception">IOException</span> {
    ...
    String urlString = <span class="string"><span class="delimiter">&quot;</span><span class="content">https://www.linkedin.com/oauth/v2/authorization?response_type=code&amp;client_id=</span><span class="delimiter">&quot;</span></span>
        + clientId + <span class="string"><span class="delimiter">&quot;</span><span class="content">&amp;redirect_uri=</span><span class="delimiter">&quot;</span></span> + redirectUri + <span class="string"><span class="delimiter">&quot;</span><span class="content">&amp;state=...</span><span class="delimiter">&quot;</span></span>;
    bWindow = <span class="keyword">new</span> BrowserWindow(urlString);
    bWindow.show();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once this has happened, we fire a <code>HideBrowserRequestEvent</code> in order to close the browser properly.</p>
</div>
<div class="paragraph">
<p>The <code>Decrypter</code> will then be fired so that we do not store the app secret in plain text. This decision is explained more in the design considerations below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> handleHideBrowser() {
    Oauth2Client.closeBrowser();
    Oauth2Client.getLinkedInS();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>After the CRM Book has received the authorization code and the app secret from the decrypter, they are sent back to LinkedIn to request for an AccessToken. Once the AccessToken has been received, the user is considered to be successfully logged in, and the accessToken can be used by the CRM Book to make requests to LinkedIn on behalf of the user. The accessToken is also stored in the config.json file for future usage.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">config.setAppSecret(accessToken);
ConfigUtil.saveConfig(config, config.DEFAULT_CONFIG_FILE);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following sequence diagram shows how the linkedIn_login feature works. As seen, it is an events-driven design.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/LinkedInLoginSequenceDiagram.png" alt="LinkedInLoginSequenceDiagram" width="800">
</div>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">Design Considerations</a></h4>
<div class="sect4">
<h5 id="aspect-storing-the-linkedin-app-secret"><a class="link" href="#aspect-storing-the-linkedin-app-secret">Aspect: Storing the LinkedIn App Secret</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Slightly encrypting the App Secret</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Easy to implement, not trivial for attackers to get by scanning the source code.</p>
</li>
<li>
<p>Cons: App secret can be derived if the attacker runs the source code</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Store the App Secret in another server, and requesting it with an authentication code</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Higher security, app secret not stored on GitHub</p>
</li>
<li>
<p>Cons: Significantly harder to implement. Requires user to have a username and password for the server not stored on GitHub.
<strong>Additional Info:</strong> See comments on Decrypter class for full argument</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-04-14 07:28:22 UTC
</div>
</div>
</body>
</html>