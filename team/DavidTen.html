<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>Ten Chee Onn David Jonathan - Project Portfolio</title>
<link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css">
</head>
<body class="article">
<div id="header">
<h1>Ten Chee Onn David Jonathan - Project Portfolio</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="project-crm-book"><a class="link" href="#project-crm-book">PROJECT: CRM Book</a></h2>
<div class="sectionbody">
<hr>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="link" href="#overview">Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>CRM Book application aims to assist Salespeople by implementing the most important functionality of a CRM System, that is, managing their business contacts and clients. In a CRM, buisness contacts are seperated into two categories, Leads and Contacts. Companies are usually added as Contacts.</p>
</div>
<div class="paragraph">
<p>Some unique features of this CRM that benefits the individual Salesperson even more is an enhanced detection of duplicates through fields such as email and phone number, importing of a CSV file of leads that the salesperson may have bought through a mailing list or obtained through a tradeshow, sharing of posts about their company through LinkedIn, as well as seeing directions to their Leadâ€™s office through Google Maps. It is important to note that these features all enhance the experience of the salesperson, and does not distract from the core functionality of managing their relationship with their leads and contacts.</p>
</div>
<div class="paragraph">
<p>The user interacts with CRM Book using a CLI, and it has a GUI created with JavaFX. It is written in Java.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary-of-contributions"><a class="link" href="#summary-of-contributions">Summary of contributions</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Major enhancement</strong>: Post a Status Update onto LinkedIn</p>
<div class="ulist">
<ul>
<li>
<p>What it does: After a Salesperson has logged in to LinkedIn via the linkedin_login command, he will be able to post status updates via the linkedin_share command.</p>
</li>
<li>
<p>Justification: This feature improves CRM Book significantly in that it does not require the Salesperson to navigate away from CRM Book just to post a status update about their company. In the Sales and Marketing world, LinkedIn is used often to promote news articles and other related company marketing materials, and this feature reduces the friction generated by doing</p>
</li>
<li>
<p>Highlights: This enhancement required an in-depth research into encryption and storing of API Secrets in a native application. It also made use of LinkedIn&#8217;s OAuth2 authentication scheme as well as API be able to work. The implementation was challenging as it required the exploration of new APIs outside of the address book. The enhancement also required studying more about events and how they are handled, as well as handling different threads on Java FX, in particular handling the 'Not on FX application thread' exception.</p>
</li>
<li>
<p>Credits: LinkedIn API</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Major enhancement</strong>: View directions to a customer or potential customer&#8217;s office via Google Maps</p>
<div class="ulist">
<ul>
<li>
<p>What it does: After a Salesperson has set their office location on the CRM Book, they will be able to view directions to a customer&#8217;s or potential customer&#8217;s office by clicking on their name.</p>
</li>
<li>
<p>Justification: This feature improves CRM Book significantly in that it does not require the Salesperson to navigate away from CRM Book just to find directions to their client&#8217;s location, or to know how long it will take to get there. Salespeople in general travel to other offices often to do a demo or to pitch a product. With this feature, the salesperson will not have to use their smartphone to view directions while still in the office. Rather, they will be able to view directions in the CRM Book and then leave the office when necessary.</p>
</li>
<li>
<p>Highlights: This enhancement involved learning more about Google Map&#8217;s webservice, studying between the different APIs and other options that they provided, as well as research on how to use the config.json file in the CRM Book.</p>
</li>
<li>
<p>Credits: Google Maps URLs</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Code contributed</strong>: [<a href="https://github.com/CS2103JAN2018-F11-B1/main/blob/master/collated/functional/davidten.md">Functional code</a>] [<a href="https://github.com/CS2103JAN2018-F11-B1/main/blob/master/collated/test/davidten.md">Test code</a>]</p>
</li>
<li>
<p><strong>Other contributions</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Project management:</p>
<div class="ulist">
<ul>
<li>
<p>Managed releases <code>v1.2</code> - <code>v1.5rc</code> (5 releases) on GitHub</p>
</li>
</ul>
</div>
</li>
<li>
<p>Community:</p>
<div class="ulist">
<ul>
<li>
<p>Reported bugs and suggestions for other teams in the class (examples: <a href="https://github.com/CS2103JAN2018-W13-B3/main/issues/157">Issue #157</a>, <a href="https://github.com/CS2103JAN2018-W13-B3/main/issues/132">Issue #132</a>, <a href="https://github.com/CS2103JAN2018-W13-B3/main/issues/133">Issue #133</a>, <a href="https://github.com/CS2103JAN2018-W13-B3/main/issues/134">Issue #134</a>, <a href="https://github.com/CS2103JAN2018-W13-B3/main/issues/136">Issue #136</a>, <a href="https://github.com/CS2103JAN2018-W13-B3/main/issues/139">Issue #139</a>, <a href="https://github.com/CS2103JAN2018-W13-B3/main/issues/140">Issue #140</a>, <a href="https://github.com/CS2103JAN2018-W13-B3/main/issues/141">Issue #141</a>, <a href="https://github.com/CS2103JAN2018-W13-B3/main/issues/145">Issue #145</a>, <a href="https://github.com/CS2103JAN2018-W13-B3/main/issues/149">Issue #149</a>)</p>
</li>
<li>
<p>Contributed to forum discussions (examples:  <a href="https://nus-cs2103-ay1718s2.slack.com/archives/C8K2W5WTH/p1523377709000303">1</a>, <a href="https://nus-cs2103-ay1718s2.slack.com/archives/C8K2W5WTH/p1521906587000027">2</a>, <a href="https://nus-cs2103-ay1718s2.slack.com/archives/C8K2W5WTH/p1521473983000781">3</a>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-user-guide"><a class="link" href="#contributions-to-the-user-guide">Contributions to the User Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the User Guide. They showcase my ability to write documentation targeting end-users.</em></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A CRM System is a Customer Relationship Management system, mainly used in the real world by Sales and Marketing teams to manage their business-customer relationships, as well as to manage business contacts, employees, clients, contract wins and sales leads. Some examples of popular CRMs include Salesforce, SAP, and Microsoft Dynamics CRM.</p>
</div>
<div class="paragraph">
<p>A common complaint against such traditional CRMs is that they are large, contain too many functionalities, and in some cases even require additional training before using. (Search for: Salesforce Trailhead)</p>
</div>
<div class="paragraph">
<p>The CRM Book application aims to assist Salespeople by implementing the most important functionality of a CRM System, that is, managing their business contacts and clients. In a CRM, business contacts are seperated into two categories, Leads and Contacts. Leads are people that the salesperson has sold to in the past, while Contacts are people whom the salesperson has sold to before, even if the company they represent may no longer purchase the product. Also, accounts represent Companies.</p>
</div>
<div class="paragraph">
<p>Some unique features of this CRM in v1.5 that benefits the individual Salesperson even more is an enhanced detection of duplicates through fields such as email and phone number, importing of a CSV file of leads that the salesperson may have bought through a mailing list or obtained through a tradeshow, sharing of posts about their company through LinkedIn, as well as seeing directions to their Lead&#8217;s office through Google Maps. It is important to note that these features all enhance the experience of the salesperson, and does not distract from the core functionality of managing their relationship with their leads and contacts.</p>
</div>
<div class="paragraph">
<p>Future releases of the CRM Book would include the ability to schedule meetings through a Calendar, integration with other Social Media networks to post company related news, allowing a client to choose a meeting slot among a few that the salesperson has specified, and also manage the contracts that tie a Contact to an account.</p>
</div>
<div class="paragraph">
<p><strong>More importantly, CRM Book is optimized for those who prefer to work with a Command Line Interface</strong> (CLI) while still having the benefits of a Graphical User Interface (GUI). If you can type fast, CRM Book can get your contact management tasks done faster than traditional GUI apps.</p>
</div>
<div class="paragraph">
<p>Interested? Jump to the <a href="#Quick Start">[Quick Start]</a> to get started. Enjoy!</p>
</div>
<div class="sect2">
<h3 id="log-in-to-linkedin-code-linklog-code-code-linkedin_login-code"><a class="link" href="#log-in-to-linkedin-code-linklog-code-code-linkedin_login-code">Log in to LinkedIn: <code>linklog</code>, <code>linkedin_login</code></a></h3>
<div class="paragraph">
<p>Format: 'linklog', 'linkedin_login'</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
A LinkedIn Login is required if you want to share posts to linkedIn. If this is your first login, you will also have to give permissions for CRM Book in LinkedIn via a pop up.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="share-a-post-on-linkedin-code-linkshare-code-code-linkedin_share-code"><a class="link" href="#share-a-post-on-linkedin-code-linkshare-code-code-linkedin_share-code">Share a Post on LinkedIn: <code>linkshare</code>, <code>linkedin_share</code></a></h3>
<div class="paragraph">
<p>Format: 'linkshare [content]', 'linkedin_share [content]'</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
This command will allow you to share a post on LinkedIn to all your connections. This will allow you to share any interesting marketing materials your company may be involved in quickly.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="setting-current-location-code-set_office_address-code-code-seta-code"><a class="link" href="#setting-current-location-code-set_office_address-code-code-seta-code">Setting current location: <code>set_office_address</code>, <code>setA</code></a></h3>
<div class="paragraph">
<p>Sets the current office address for Google Maps<br>
Format: `setA a/ADDRESS</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Setting this address is required if you want to see the Google Map directions to a customer&#8217;s location
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="get-directions-to-customer-s-office-commandless"><a class="link" href="#get-directions-to-customer-s-office-commandless">Get directions to customer&#8217;s office: commandless</a></h3>
<div class="paragraph">
<p>In order to use this, you must have an office address set. You can then either click on a person card or use the <code>select</code> command in order to view the Google Maps directions.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If a person card was selected while the office location is set, you have to select a different person card to see the map
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Success of this command is also dependent on the success of Google intepreting the address entered
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-developer-guide"><a class="link" href="#contributions-to-the-developer-guide">Contributions to the Developer Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the Developer Guide. They showcase my ability to write technical documentation and the technical depth of my contributions to the project.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="linkedin-login-feature"><a class="link" href="#linkedin-login-feature">LinkedIn Login Feature</a></h3>
<div class="sect3">
<h4 id="current-implementation"><a class="link" href="#current-implementation">Current Implementation</a></h4>
<div class="paragraph">
<p>The linkedInLogin mechanism is handled largely by the oAuth2Client interacting with the browser window, which the user will interact with in order to give LinkedIn their username, password, as well as granting the application permission for use.</p>
</div>
<div class="paragraph">
<p>When the <code>linkedIn_login</code> command is called, a <code>ShowBrowserRequestEvent</code> will be fired by <code>LinkedInLoginCommand(Class)</code> and picked up by the MainWindow.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
    <span class="directive">public</span> CommandResult execute() {
        EventsCenter.getInstance().post(<span class="keyword">new</span> ShowBrowserRequestEvent());
        <span class="keyword">return</span> <span class="keyword">new</span> CommandResult(MESSAGE_SUCCESS);
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The MainWindow in turn will call the <code>OAuth2Client(Class)</code> which will fire up the browser awaiting an authorization code from LinkedIn that will be sent after the user has successfully logged in and granted the CRM Book permission.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Subscribe</span>
    <span class="directive">private</span> <span class="type">void</span> handleLinkedInAuthenticationEvent(ShowBrowserRequestEvent event) {
        logger.info(LogsCenter.getEventHandlingLogMessage(event));
        handleLinkedInAuthentication();
    }</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> handleLinkedInAuthentication() {
    <span class="keyword">try</span> {
        Oauth2Client.authenticateWithLinkedIn();
    } <span class="keyword">catch</span> (<span class="exception">IOException</span> e) {
        e.printStackTrace();
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> authenticateWithLinkedIn() <span class="directive">throws</span> <span class="exception">IOException</span> {
    ...
    String urlString = <span class="string"><span class="delimiter">&quot;</span><span class="content">https://www.linkedin.com/oauth/v2/authorization?response_type=code&amp;client_id=</span><span class="delimiter">&quot;</span></span>
        + clientId + <span class="string"><span class="delimiter">&quot;</span><span class="content">&amp;redirect_uri=</span><span class="delimiter">&quot;</span></span> + redirectUri + <span class="string"><span class="delimiter">&quot;</span><span class="content">&amp;state=...</span><span class="delimiter">&quot;</span></span>;
    bWindow = <span class="keyword">new</span> BrowserWindow(urlString);
    bWindow.show();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once this has happened, we fire a <code>HideBrowserRequestEvent</code> in order to close the browser properly.</p>
</div>
<div class="paragraph">
<p>The <code>Decrypter</code> will then be fired so that we do not store the app secret in plain text. This decision to use a Decrypter class is in the comments section of the Decrypter class, and duplicated here for convenience to the reader.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"> <span class="comment">// Decrypts the s for use for OAuth</span>
 <span class="comment">// While this is not an ideal situation, LinkedIn's OAuth API does not have a client-side authentication flow.</span>
 <span class="comment">// This means that it will always require the app s for purposes of authentication.</span>
 <span class="comment">// Because of this, building a native (desktop) app that authenticates with LinkedIn is not ideal.</span>
 <span class="comment">// However, a number of sites have agreed that if you have to store the key in the code, then obscuring it to make</span>
 <span class="comment">// it slightly more difficult for a potential hacker to get it is best. (They will need to run the app rather than</span>
 <span class="comment">// just reading the plain text version)</span>
 <span class="comment">// This is especially so because a LinkedIn S is not especially valuable, since anyone can create a LinkedIn app.</span>
 <span class="comment">// Furthermore the chances of competitors abusing the secret to disable this application is minimal, since it is</span>
 <span class="comment">// ultimately, a school project.</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> handleHideBrowser() {
    Oauth2Client.closeBrowser();
    Oauth2Client.getLinkedInS();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>After the CRM Book has received the authorization code and the app secret from the decrypter, they are sent back to LinkedIn to request for an AccessToken. Once the AccessToken has been received, the user is considered to be successfully logged in, and the accessToken can be used by the CRM Book to make requests to LinkedIn on behalf of the user. The accessToken is also stored in the config.json file for future usage.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">config.setAppSecret(accessToken);
ConfigUtil.saveConfig(config, config.DEFAULT_CONFIG_FILE);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following sequence diagram shows how the linkedIn_login feature works. As seen, it is an events-driven design.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/LinkedInLoginSequenceDiagram.png" alt="LinkedInLoginSequenceDiagram" width="800">
</div>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">Design Considerations</a></h4>
<div class="sect4">
<h5 id="aspect-storing-the-linkedin-app-secret"><a class="link" href="#aspect-storing-the-linkedin-app-secret">Aspect: Storing the LinkedIn App Secret</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Slightly encrypting the App Secret</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Easy to implement, not trivial for attackers to get by scanning the source code.</p>
</li>
<li>
<p>Cons: App secret can be derived if the attacker runs the source code</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Store the App Secret in another server, and requesting it with an authentication code</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Higher security, app secret not stored on GitHub</p>
</li>
<li>
<p>Cons: Significantly harder to implement. Requires user to have a username and password for the server not stored on GitHub.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 3:</strong> Store the App Secret in plain text</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Much easier to code and implement</p>
</li>
<li>
<p>Cons: Bad security, secret will likely end up in a paste database somewhere in the internet</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="share-to-linkedin-feature"><a class="link" href="#share-to-linkedin-feature">Share to LinkedIn Feature</a></h3>
<div class="sect3">
<h4 id="current-implementation-2"><a class="link" href="#current-implementation-2">Current Implementation</a></h4>
<div class="paragraph">
<p>When the linkedin_share command is executed, it will call the Config class to get a current copy of the configurations used by the Application. It will also set the boolean value of postSuccess to false. This boolean value will be used to determine if we managed to successfully post to LinkedIn.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> postToLinkedIn() {
    Config config = Config.setupConfig();
    postSuccess = <span class="predefined-constant">false</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, we create a JSON Object that LinkedIn requires, specifying the visibility (privacy) of the post, and the actual content of the post. By default, we set the visibility to be 'anyone', or in Facebook terms, 'Public'. An overview on LinkedIn&#8217;s share API can be found at <a href="https://developer.linkedin.com/docs/share-on-linkedin" class="bare">https://developer.linkedin.com/docs/share-on-linkedin</a></p>
</div>
<div class="paragraph">
<p>With the JSON Object and the access_token taken from the user&#8217;s configuration file, we create a HttpPost Object and HttpClient Object, send it to LinkedIn, and analyze the response. In particular, if the response contains an updateUrl, it means that the post has been successfully posted, and we update the boolean value of postSuccess to true.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">HttpPost httppost = getHttpPostObject(jsonToSend, accessToken);
HttpClient httpclient = getHttpClientObject();
JSONObject linkedInResponse = sendHttpRequestToLinkedIn(httppost, httpclient);
logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="content">LinkedIn Response is : </span><span class="delimiter">&quot;</span></span> + linkedInResponse.toString());
<span class="keyword">if</span> (linkedInResponse.has(<span class="string"><span class="delimiter">&quot;</span><span class="content">updateUrl</span><span class="delimiter">&quot;</span></span>) || linkedInResponse.has(<span class="string"><span class="delimiter">&quot;</span><span class="content">updateURL</span><span class="delimiter">&quot;</span></span>)) {
    <span class="comment">//if has updateURL then it successfully got posted</span>
    logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="content">Post has been successfully posted</span><span class="delimiter">&quot;</span></span>);
    postSuccess = <span class="predefined-constant">true</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally we use the postSuccess value to determine if we send a success or failed message to the user.</p>
</div>
<div class="paragraph">
<p>The following sequence diagram shows how the command works</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/LinkedInShareSequenceDiagram.png" alt="LinkedInShareSequenceDiagram" width="800">
</div>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-2"><a class="link" href="#design-considerations-2">Design Considerations</a></h4>
<div class="sect4">
<h5 id="aspect-allowing-salesperson-to-set-privacy-level-of-their-post"><a class="link" href="#aspect-allowing-salesperson-to-set-privacy-level-of-their-post">Aspect: Allowing salesperson to set privacy level of their post</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Only option is 'anyone'</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Salesperson always wants to share to as many people as possible. Reduces complexity of command and/or save on a command to set a default level of visibility.</p>
</li>
<li>
<p>Cons: Salesperson is limited to only posting public posts using CRM Book</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Allow salesperson to set a default visibility option using another command</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Salesperson has greater flexibility in setting the visibility type of their post.</p>
</li>
<li>
<p>Cons: Have to write a new command that may not be used.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 3:</strong> Allow salesperson to specify visibility in share command</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Salesperson has the greatest level flexibility in setting the visibility type of their post.</p>
</li>
<li>
<p>Cons: Increases complexity of the command</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="saving-a-location-for-google-maps"><a class="link" href="#saving-a-location-for-google-maps">Saving a location for Google Maps</a></h3>
<div class="sect3">
<h4 id="current-implementation-3"><a class="link" href="#current-implementation-3">Current Implementation</a></h4>
<div class="paragraph">
<p>To save a location in Google Maps, it does not matter whether CRM Book already has a pre-existing address. Rather, we always overwrite the config file to be updated with the latest address.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config initializedConfig = Config.setupConfig();
initializedConfig.setUserLocation(address.toString());</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following sequence diagram shows how the command works</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/SaveGoogleLocationSequenceDiagram.png" alt="SaveGoogleLocationSequenceDiagram" width="800">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="view-directions-to-a-client-s-office"><a class="link" href="#view-directions-to-a-client-s-office">View directions to a Client&#8217;s office</a></h3>
<div class="sect3">
<h4 id="current-implementation-4"><a class="link" href="#current-implementation-4">Current Implementation</a></h4>
<div class="paragraph">
<p>The current implementation of this feature is the same as when a person card is changed (Like the select command). The difference is that if the config file states that a user&#8217;s office location has been set, then load Google maps instead of doing a Google Search.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Subscribe</span>
<span class="directive">private</span> <span class="type">void</span> handlePersonPanelSelectionChangedEvent(PersonPanelSelectionChangedEvent event) {
    getConfig();
    logger.info(LogsCenter.getEventHandlingLogMessage(event));
    <span class="comment">//if person has no home location set</span>
    <span class="keyword">if</span> (config.getUserLocation() == <span class="predefined-constant">null</span> || config.getUserLocation().length() == <span class="integer">0</span>) {
        logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="content">No office location set, doing Google search</span><span class="delimiter">&quot;</span></span>);
        loadPersonPage(event.getNewSelection().person);
    } <span class="keyword">else</span> {
        <span class="predefined-type">String</span> url = generateUrl(config.getUserLocation(), event.getNewSelection().person.getAddress().toString());
        logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="content">Office location set, Load Google Maps. URL IS </span><span class="delimiter">&quot;</span></span> + url);
        loadPage(url);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following sequence diagram shows how this feature works. The select command is used only if the user activated it via commandline. However, clicking on another person card without using the select command will work as well.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/LoadGoogleMapsSequenceDiagram.png" alt="LoadGoogleMapsSequenceDiagram" width="800">
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-04-15 13:59:17 UTC
</div>
</div>
</body>
</html>