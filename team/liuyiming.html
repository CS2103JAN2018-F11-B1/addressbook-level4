<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>Liu Yiming - Project Portfolio</title>
<link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css">
</head>
<body class="article">
<div id="header">
<h1>Liu Yiming - Project Portfolio</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="project-crm-book"><a class="link" href="#project-crm-book">PROJECT: CRM Book</a></h2>
<div class="sectionbody">
<hr>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="link" href="#overview">Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>CRM Book is a desktop application targeted for salespeople. The user interacts with it using a CLI, and it has a GUI created with JavaFX. It is written in Java, and has about 10 kLoC.<br>
This application allows salespeople to organize their Leads, Contacts, and Accounts that suits their liking, as well as address problems that symptomatic in the sales industry, such as identifying duplicates.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary-of-contributions"><a class="link" href="#summary-of-contributions">Summary of contributions</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Major enhancement</strong>: added the ability to change the theme of CRM Book</p>
<div class="ulist">
<ul>
<li>
<p>What it does: allows the user to change the color theme of CRM Book according to his preference. CRM Book will save this change in user preference and display the chosen theme in subsequent runs.</p>
</li>
<li>
<p>Justification: This feature improves the user experience significantly because the user can change the color theme to adapt to different light intensity of the surrounding. For example, change to dark theme when the room is dark. This would prevent eye fatigue. Alternatively, the user can choose to use a theme based on his own likings.</p>
</li>
<li>
<p>Highlights: This enhancement affects all parts of UI. It required an in-depth understanding of CSS and FXML. In addition, the feature is implemented in such a way that it would be very easy for future developers to include more themes.</p>
</li>
<li>
<p>Credits: The new themes are built based on the dark theme of AddressBook - Level 4.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Minor enhancement</strong>: added 10 different color styles for tags.</p>
</li>
<li>
<p><strong>Minor enhancement</strong>: enabled auto-complete of command keywords.</p>
</li>
<li>
<p><strong>Code contributed</strong>: [<a href="https://github.com/CS2103JAN2018-F11-B1/main/blob/master/collated/functional/A0155428B.md">Functional code</a>] [<a href="https://github.com/CS2103JAN2018-F11-B1/main/blob/master/collated/test/A0155428B.md">Test code</a>] [<a href="https://github.com/CS2103JAN2018-F11-B1/main/blob/master/collated/unused/A0155428B-unused.md">Unused code</a>]</p>
</li>
<li>
<p><strong>Other contributions</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Documentation:</p>
<div class="ulist">
<ul>
<li>
<p>Enabled auto-publishing of docs</p>
</li>
<li>
<p>Enabled Coveralls</p>
</li>
</ul>
</div>
</li>
<li>
<p>Enhancements to existing features:</p>
<div class="ulist">
<ul>
<li>
<p>Created and updated the icon of CRM Book (Pull requests <a href="https://github.com/CS2103JAN2018-F11-B1/main/pull/32">#32</a>)</p>
</li>
<li>
<p>Updated the header of CRM Book (Pull requests <a href="https://github.com/CS2103JAN2018-F11-B1/main/pull/31">#31</a>)</p>
</li>
<li>
<p>Updated UI to include a welcome page (Pull requests <a href="https://github.com/CS2103JAN2018-F11-B1/main/pull/158">#158</a>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Community:</p>
<div class="ulist">
<ul>
<li>
<p>Reported bugs and suggestions for other teams in the class (examples: <a href="https://github.com/CS2103JAN2018-W14-B4/main/issues/154">Issue #154</a>, <a href="https://github.com/CS2103JAN2018-W14-B4/main/issues/162">Issue #162</a>, <a href="https://github.com/CS2103JAN2018-W14-B4/main/issues/165">Issue #165</a>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-user-guide"><a class="link" href="#contributions-to-the-user-guide">Contributions to the User Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the User Guide. They showcase my ability to write documentation targeting end-users.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="change-theme-code-changetheme-code-since-v1-4"><a class="link" href="#change-theme-code-changetheme-code-since-v1-4">Change theme: <code>changetheme</code>  [since v1.4]</a></h3>
<div class="paragraph">
<p>Changes color theme of CRM Book to the user specified theme. Currently, there are three themes, namely <code>dark</code>, <code>light</code> and <code>blue</code>.
The <code>blue</code> theme is the default theme. When user opens CRM Book for the first time, blue theme will be on display.
If the user changes the theme, it will be saved in user preferences so that CRM Book will display the user preferred theme in subsequent runs.<br>
Format: <code>changetheme THEME</code><br>
Example: <code>changetheme light</code></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-developer-guide"><a class="link" href="#contributions-to-the-developer-guide">Contributions to the Developer Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the Developer Guide. They showcase my ability to write technical documentation and the technical depth of my contributions to the project.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="auto-complete-feature"><a class="link" href="#auto-complete-feature">Auto-Complete feature</a></h3>
<div class="sect3">
<h4 id="current-implementation"><a class="link" href="#current-implementation">Current Implementation</a></h4>
<div class="paragraph">
<p>To allow fast typing of commands, auto-complete of commands is implemented.</p>
</div>
<div class="paragraph">
<p>Auto-complete is implemented through the TextFields feature of ControlsFX.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">//In CommandBox.java</span>
TextFields.bindAutoCompletion(commandTextField, Messages.AUTOCOMPLETE_FIELD);</code></pre>
</div>
</div>
<div class="paragraph">
<p>All the command words are included in the AUTOCOMPLETE_FIELD string array.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">//In Messages.java</span>
<span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span><span class="type">[]</span> AUTOCOMPLETE_FIELD = {
    <span class="comment">//all command keywords</span>
    };</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition to all the command words, a COMMAND_AUTO_COMPLETE string, with both command word and prefixes, is also included for add command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">//In AddCommand.java</span>
<span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span> COMMAND_AUTO_COMPLETE = COMMAND_WORD + <span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span> + PREFIX_NAME + <span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>
        + PREFIX_PHONE + <span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span> + PREFIX_EMAIL + <span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span> + PREFIX_ADDRESS + <span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span> + PREFIX_TAG;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">Design Considerations</a></h4>
<div class="sect4">
<h5 id="aspect-implementation-of-auto-complete"><a class="link" href="#aspect-implementation-of-auto-complete">Aspect: Implementation of Auto-complete</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> All the commands that contain the typed input are shown. ie. When "a" is typed, both "add" and "clear" will be shown.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Allow new user to quickly learn the different command words.</p>
</li>
<li>
<p>Cons: When there are a lot of commands, efficiency of auto-complete decreases as user would have too many options to choose from.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Only commands with the same sequence as the typed input are shown. ie. When "a" is typed, only "add" will be shown.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Higher efficiency of auto-complete.</p>
</li>
<li>
<p>Cons: New user might find this difficult to use as they are unfamillar with the command words.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="color-tag-feature"><a class="link" href="#color-tag-feature">Color Tag feature</a></h3>
<div class="sect3">
<h4 id="current-implementation-2"><a class="link" href="#current-implementation-2">Current Implementation</a></h4>
<div class="paragraph">
<p>To allow easy identification of different tags, a color tag feature is introduced.</p>
</div>
<div class="paragraph">
<p>A string array is declared in PersonCard.java to include a set of colors for tags.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">//In PersonCard.java</span>
<span class="directive">private</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span><span class="type">[]</span> TAG_COLORS =
        { <span class="string"><span class="delimiter">&quot;</span><span class="content">blue</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">cyan</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">green</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">magenta</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">orange</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">pink</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">red</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">yellow</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">teal</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">brown</span><span class="delimiter">&quot;</span></span> };</code></pre>
</div>
</div>
<div class="paragraph">
<p>These colors are defined, with their background color and text color spelled out, in the all the different theme CSS files.</p>
</div>
<div class="paragraph">
<p>A hash code of the tag name is used to select a color for the tag such that it would remain consistent between different runs of the software.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">//In PersonCard.java</span>
<span class="directive">private</span> <span class="predefined-type">String</span> getTagColorFor(<span class="predefined-type">String</span> tagName) {
    <span class="keyword">return</span> TAG_COLORS[<span class="predefined-type">Math</span>.abs(tagName.hashCode()) % TAG_COLORS.length];
}

<span class="comment">//In PersonCard.java</span>
<span class="directive">private</span> <span class="type">void</span> initTags(Person person) {
    person.getTags().forEach(tag -&gt; {
        <span class="predefined-type">Label</span> tagLabel = <span class="keyword">new</span> <span class="predefined-type">Label</span>(tag.tagName);
        tagLabel.getStyleClass().add(getTagColorFor(tag.tagName));
        tags.getChildren().add(tagLabel);
    });
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-2"><a class="link" href="#design-considerations-2">Design Considerations</a></h4>
<div class="sect4">
<h5 id="aspect-implementation-of-color-tags"><a class="link" href="#aspect-implementation-of-color-tags">Aspect: Implementation of color tags</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Assign a color from a predefined list based on tag name</p>
<div class="ulist">
<ul>
<li>
<p>Pros: No additional commands are needed to generate a color for the tags.</p>
</li>
<li>
<p>Cons: User cannot choose a color for the tag.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Allow user to set a color for the tag</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Allows more freedom for user customization.</p>
</li>
<li>
<p>Cons: Takes more time to implement color tags.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="change-theme-feature"><a class="link" href="#change-theme-feature">Change Theme feature</a></h3>
<div class="sect3">
<h4 id="reason-for-implementation"><a class="link" href="#reason-for-implementation">Reason for implementation</a></h4>
<div class="paragraph">
<p>CRM Book users are expected to spent long period of time on the software and under different light settings. Change theme allows users to switch between light and dark theme. This would prevent eye fatigue.</p>
</div>
</div>
<div class="sect3">
<h4 id="current-implementation-3"><a class="link" href="#current-implementation-3">Current implementation</a></h4>
<div class="paragraph">
<p>The sequence diagram below shows the interactions of change theme command within the logic component.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/ChangeThemeLogicComponentSequenceDiagram.png" alt="ChangeThemeLogicComponentSequenceDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p>The sequence diagram below shows the interactions between different components of CRM Book for change theme command.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/ChangeThemeHighLevelSequenceDiagrams.png" alt="ChangeThemeHighLevelSequenceDiagrams" width="800">
</div>
</div>
<div class="paragraph">
<p>Every change theme command will post a ChangeThemeRequestEvent to EventCenter. When this event is handled, the UI will be updated to display the chosen theme. In addition, the themeFilePath in user prefs is updated with the chosen theme file path.
Currently, there are three themes, namely blue, light and dark. The CSS files of these themes are referenced in Theme class as strings.
The following piece of code demonstrates how the CSS files are referenced in Theme class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>//in Theme.java
    public static final String DEFAULT_THEME_FILE_PATH = "/view/BlueTheme.css";
    public static final String DARK_THEME_FILE_PATH = "/view/DarkTheme.css";
    public static final String LIGHT_THEME_FILE_PATH = "/view/LightTheme.css";</pre>
</div>
</div>
<div class="paragraph">
<p>There is a method in Theme class to convert theme name into theme file path.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>//in Theme.java
    public String convertThemeToFilePath() {
            switch (this.theme) {
            case DARK_THEME:
                return DARK_THEME_FILE_PATH;
            //other cases
            }
        }</pre>
</div>
</div>
<div class="paragraph">
<p>This method is used to check if the chosen theme is equals to the current theme by comparing the file path of the chosen theme with the file path in user prefs.</p>
</div>
<div class="paragraph">
<p>If the chosen theme is not equals to the current theme, the ChangeThemeRequestEvent will be handle in MainWindow class.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>//in MainWindow.java
public void handleChangeTheme(String theme) {
        String fullPath = getFullPath(this.themeFilePath);
        primaryStage.getScene().getStylesheets().remove(fullPath);

        switch (theme) {
        case Theme.LIGHT_THEME:
            this.themeFilePath = Theme.LIGHT_THEME_FILE_PATH;
            break;
        case Theme.DARK_THEME:
            this.themeFilePath = Theme.DARK_THEME_FILE_PATH;
            break;
        case Theme.BLUE_THEME:
            this.themeFilePath = Theme.BLUE_THEME_FILE_PATH;
            break;
        default:
            //this will not happen
        }

        prefs.getGuiSettings().setThemeFilePath(this.themeFilePath);
        fullPath = getFullPath(this.themeFilePath);
        primaryStage.getScene().getStylesheets().add(fullPath);
    }</pre>
</div>
</div>
<div class="paragraph">
<p>This method updates the theme file path in the primary scene in 3 steps:<br></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Removes the current theme file path from primary scene.</p>
</li>
<li>
<p>Updates the theme file path</p>
</li>
<li>
<p>Adds the new theme file path into primary scene.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In addition, the updated theme file path is written into user prefs.<br></p>
</div>
<div class="paragraph">
<p>A switch case statement is used to update the new theme file path. This implementation allows easy extension of the feature; i.e. when a new theme is created, it can be easily added as a case.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-04-14 13:16:41 UTC
</div>
</div>
</body>
</html>